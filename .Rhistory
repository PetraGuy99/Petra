package_version(rgbif)
library(rgbif)
package_version(rgbif)
package_version('rgbif')
?package_version
library(rgbif)
package_version(rgbif)
installed.packages()
sessionInfo()
library(rgbif)
library(readxl)
library(dplyr)
library(tidyr)
library(ggpubr)
library(ggplot2)
setwd('C:/dev/code/Petra')
knitr::opts_chunk$set(
echo = FALSE,      # hide all code by default
message = FALSE,   # hide package messages
warning = FALSE    # hide warnings
)
# Path to your Excel file
file_path <- "'../../data/nursery/Dundreggan2025.xlsx'"
# Get all sheet names
sheet_names <- excel_sheets(file_path)
library(readxl)
library(dplyr)
library(tidyr)
library(ggpubr)
library(ggplot2)
setwd('C:/dev/code/Petra')
knitr::opts_chunk$set(
echo = F,      # hide all code by default
message = FALSE,   # hide package messages
warning = FALSE    # hide warnings
)
# Path to your Excel file
file_path <- "'../../data/nursery/Dundreggan2025.xlsx'"
# Get all sheet names
sheet_names <- excel_sheets(file_path)
# Path to your Excel file
file_path <- "'../../data/field/Dundreggan2025.xlsx'"
# Get all sheet names
sheet_names <- excel_sheets(file_path)
# Path to your Excel file
file_path <- "'../../data/field/Dundreggan2025.xlsx'"
# Get all sheet names
sheet_names <- excel_sheets(file_path)
# Path to your Excel file
file_path <- "'../../data/field/Dundreggan2025.xlsx'"
# Get all sheet names
sheet_names <- excel_sheets(file_path)
# Path to your Excel file
file_path <- "../../data/field/Dundreggan2025.xlsx"
# Get all sheet names
sheet_names <- excel_sheets(file_path)
# Read all sheets into a named list of data frames
dfs <- lapply(sheet_names, function(sheet) read_excel(file_path, sheet = sheet))
names(dfs) <- sheet_names
View(dfs)
setwd('C:/dev/code/Petra')
#################
library(leaflet)
library(dplyr)
points_df <- data.frame(
name = c("C1", "T1", "C2","T2", "C3", "T3"),
lat = c(56.405141,56.404089,56.405029,56.404829,56.405019, 56.404960),  # latitude
lon = c(-3.967394,-3.965881,-3.964707,-3.965019,-3.966727,-3.965886)   # longitude
)
# Create leaflet map
leaflet(points_df) %>%
# Add OS map tiles (Ordnance Survey Open Zoomstack)
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=YOUR_OS_API_KEY",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
# Create leaflet map
leaflet(points_df) %>%
# Add OS map tiles (Ordnance Survey Open Zoomstack)
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
# Create leaflet map
leaflet(points_df) %>%
# Add OS map tiles (Ordnance Survey Open Zoomstack)
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
eaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%  # <-- set appropriate zoom
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(~lon, ~lat, label = ~name, color = "blue", radius = 6)
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%  # <-- set appropriate zoom
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(~lon, ~lat, label = ~name, color = "blue", radius = 6)
# Create leaflet map
leaflet(points_df) %>%
# Add OS map tiles (Ordnance Survey Open Zoomstack)
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Light map
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key="LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd, os_key
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Light map
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd", os_key
),
attribution = "© Ordnance Survey",
group = "Light"
) %>%
# Outdoor map (terrain/contours)
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
# Road map (urban/streets)
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Road_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd", os_key
),
attribution = "© Ordnance Survey",
group = "Road"
) %>%
# Add circle markers for points
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6,
group = "Points"
) %>%
# Add layer control (toggle between maps)
addLayersControl(
baseGroups = c("Light", "Outdoor", "Road"),
overlayGroups = c("Points"),
options = layersControlOptions(collapsed = FALSE)
)
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Light map
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd", os_key
),
attribution = "© Ordnance Survey",
group = "Light"
) %>%
# Outdoor map (terrain/contours)
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
)
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Outdoor map (terrain/contours)
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
),
attribution = "© Ordnance Survey",
group = "Outdoor"
)%>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
# Create leaflet map
leaflet(points_df) %>%
# Add OS map tiles (Ordnance Survey Open Zoomstack)
addTiles(
urlTemplate = "https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd",
attribution = "© Ordnance Survey"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "blue",
fillOpacity = 0.8,
radius = 6
)
# Leaflet map
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Light map
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
# Add circle markers colored by category
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
# Your OS API key
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
# Leaflet map
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Light map
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
# Add circle markers colored by category
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
# Define colors for categories
colors <- c(C = "orange", T = "green")
# Leaflet map
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Light map
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
# Add circle markers colored by category
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
points_df <- data.frame(
name = c("C1", "C2", "C3", "T1", "T2", "T3"),
lat  = c(51.5074, 51.5100, 51.5125, 52.4862, 52.4900, 52.4950),
lon  = c(-0.1278, -0.1300, -0.1350, -1.8904, -1.8950, -1.9000),
category = c("C", "C", "C", "T", "T", "T")  # C = control, T = treatment
)
# Your OS API key
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
# Define colors for categories
colors <- c(C = "orange", T = "green")
# Leaflet map
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
# Light map
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Light_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
# Add circle markers colored by category
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
# Example data frame with coordinates (lat/lon)
points_df <- data.frame(
name = c("C1", "T1", "C2","T2", "C3", "T3"),
lat = c(56.405141,56.404089,56.405029,56.404829,56.405019, 56.404960),  # latitude
lon = c(-3.967394,-3.965881,-3.964707,-3.965019,-3.966727,-3.965886)   # longitude
)
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
colors <- c(C = "orange", T = "green")
# Create leaflet map
leaflet(points_df) %>%
setView(lng = -1.5, lat = 52.5, zoom = 8) %>%
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
points_df <- data.frame(
name = c("C1", "T1", "C2","T2", "C3", "T3"),
lat = c(56.405141,56.404089,56.405029,56.404829,56.405019, 56.404960),  # latitude
lon = c(-3.967394,-3.965881,-3.964707,-3.965019,-3.966727,-3.965886)   # longitude
)
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
colors <- c(C = "orange", T = "green")
# Create leaflet map
leaflet(points_df) %>%
setView(lng = -3.967, lat = 56.405, zoom = 8) %>%
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
points_df <- data.frame(
name = c("C1", "T1", "C2","T2", "C3", "T3"),
lat = c(56.405141,56.404089,56.405029,56.404829,56.405019, 56.404960),  # latitude
lon = c(-3.967394,-3.965881,-3.964707,-3.965019,-3.966727,-3.965886) ,  # longitude
category = c("C", "C", "C", "T", "T", "T")  # C = control, T = treatment
)
# Create leaflet map
leaflet(points_df) %>%
setView(lng = -3.967, lat = 56.405, zoom = 8) %>%
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
points_df <- data.frame(
name = c("C1", "T1", "C2","T2", "C3", "T3"),
lat = c(56.405141,56.404089,56.405029,56.404829,56.405019, 56.404960),  # latitude
lon = c(-3.967394,-3.965881,-3.964707,-3.965019,-3.966727,-3.965886) ,  # longitude
category = c("C", "C", "C", "T", "T", "T")  # C = control, T = treatment
)
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
colors <- c(C = "orange", T = "green")
# Create leaflet map
leaflet(points_df) %>%
setView(lng = -3.967, lat = 56.405, zoom = 8) %>%
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
points_df <- data.frame(
name = c("C1", "T1", "C2","T2", "C3", "T3"),
lat = c(56.405141,56.404089,56.405029,56.404829,56.405019, 56.404960),  # latitude
lon = c(-3.967394,-3.965881,-3.964707,-3.965019,-3.966727,-3.965886) ,  # longitude
category = c("C", "C", "C", "T", "T", "T")  # C = control, T = treatment
)
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
colors <- c(C = "orange", T = "green")
points_df$color <- ifelse(points_df$category == "C", "orange", "green")
# Create leaflet map
leaflet(points_df) %>%
setView(lng = -3.967, lat = 56.405, zoom = 8) %>%
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = ~colors[category],
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
points_df <- data.frame(
name = c("C1", "T1", "C2","T2", "C3", "T3"),
lat = c(56.405141,56.404089,56.405029,56.404829,56.405019, 56.404960),  # latitude
lon = c(-3.967394,-3.965881,-3.964707,-3.965019,-3.966727,-3.965886) ,  # longitude
category = c("C", "C", "C", "T", "T", "T")  # C = control, T = treatment
)
os_key <- "LkDXYcbS1dYXk2hbGZTbsRGACx0kDWdd"
colors <- c(C = "orange", T = "green")
points_df$color <- ifelse(points_df$category == "C", "orange", "green")
# Create leaflet map
leaflet(points_df) %>%
setView(lng = -3.967, lat = 56.405, zoom = 8) %>%
addTiles(
urlTemplate = paste0(
"https://api.os.uk/maps/raster/v1/zxy/Outdoor_3857/{z}/{x}/{y}.png?key=", os_key
),
attribution = "© Ordnance Survey",
group = "Outdoor"
) %>%
addCircleMarkers(
~lon, ~lat,
label = ~name,
color = "black",          # border color
fillColor = ~color,       # fill color (orange/green)
fillOpacity = 0.8,
radius = 6,
group = "Points"
)
